"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[904],{60904:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(67294),a=n(96974),o=n(68527),u=n(8016),c=n(6886),i=n(15193),l=n(10894),s=n(79042),d=n(79762),f=n(11391),m=n(94649),p=n(19501),v=n(14578),h=n(53990),y=n(8193),g=n(355),E=n(59572);function b(e,t,n,r,a,o,u){try{var c=e[o](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){b(o,r,a,u,c,"next",e)}function c(e){b(o,r,a,u,c,"throw",e)}u(void 0)}))}}const S={addStudentAttendance:function(){var e=w(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.Z.post("attendances/",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTodayAttendances:function(){var e=w(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.Z.get("attendances/today/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()};function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const x=function(){var e,t,n=(0,a.s0)(),E=(e=(0,r.useState)(null),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],u=!0,c=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=E[0],w=E[1],x=(0,g.u)(),T=x.isFetching,O=x.students,j=x.grade;(0,r.useEffect)((function(){S.getTodayAttendances().then((function(e){w(e.data)})).catch((function(e){console.log(e)}))}),[]);var A=function(e,t,n){return!e&&201===(null==t?void 0:t.status)||(null==b?void 0:b.some((function(e){return e.student===n.id})))},P=p.Ry().shape({attendance:p.Z_().required("This field is required")}),k=function(e,t){var n=t.setErrors,r=t.setSubmitting,a=t.setStatus;r(!0),S.addStudentAttendance(e).then((function(e){a(e)})).catch((function(e){n(null==e?void 0:e.response.data)})).finally((function(){return r(!1)}))};return T?r.createElement(r.Fragment,null,r.createElement(o.kC,{justify:"center",align:"center",py:5},r.createElement(u.$,{color:"telegram.700"}))):T||0!==(null==O?void 0:O.length)?r.createElement(r.Fragment,null,r.createElement(i.zx,{borderRadius:5,colorScheme:"orange",style:{boxShadow:"none"},mt:6,size:["md"],fontSize:"14px",onClick:function(){return n(-1)}},r.createElement(o.kC,{alignItems:"center"},r.createElement(l.JO,{as:y.YwC,mr:2})," Attendance List")),r.createElement(o.kC,{mt:3,mb:6,justifyContent:"center"},r.createElement(o.X6,{fontSize:["lg","xl","2xl"]},"Class ",null==j?void 0:j.grade," Attendance - ",(new Date).toDateString())),r.createElement(s.xJ,{py:4,boxShadow:"lg",rounded:"md"},r.createElement(s.iA,{variant:"unstyled"},r.createElement(s.hr,{borderBottom:"2px",borderColor:"gray.200"},r.createElement(s.Tr,null,r.createElement(s.Th,null,"Student"),r.createElement(s.Th,null,"Student ID"),r.createElement(s.Th,null,"Attendance"))),r.createElement(s.p3,null,null==O?void 0:O.map((function(e){return r.createElement(s.Tr,{key:e.id},r.createElement(s.Td,null,"".concat(e.first_name," ").concat(e.middle_name," ").concat(e.last_name)),r.createElement(s.Td,null,e.student_id),r.createElement(m.J9,{initialValues:{attendance:"P",student:e.id},validationSchema:P,onSubmit:k},(function(t){var n=t.errors,a=t.isSubmitting,u=t.touched,c=t.status,p=t.submitForm;return r.createElement(r.Fragment,null,r.createElement(s.Td,null,r.createElement(m.l0,null,r.createElement(d.NI,{isInvalid:!!n.attendance&&u.attendance},r.createElement(m.gN,{as:f.Ph,id:"attendance",name:"attendance",borderRadius:5,disabled:A(a,c,e)},r.createElement("option",{value:"P"},"Present"),r.createElement("option",{value:"UNEX"},"SC-UNEX ( Unexcused / Unverified )"),r.createElement("option",{value:"ETRD"},"SC-ETRD ( Excused Tardy )"),r.createElement("option",{value:"UTRD"},"SC-UTRD ( Unexcused Tardy )"),r.createElement("option",{value:"VTP"},"SC-VTP ( Virtual Present Code )")),r.createElement(d.J1,null,r.createElement(d.Xg,null),n.attendance)))),r.createElement(s.Td,null,r.createElement(i.zx,{colorScheme:"telegram",borderRadius:5,style:{boxShadow:"none"},onClick:p,disabled:a||A(a,c,e)},r.createElement(o.kC,{alignItems:"center"},A(a,c,e)?r.createElement(l.JO,{as:v.Slv,mr:2}):r.createElement(l.JO,{as:h.eBc,mr:2}),A(a,c,e)?"Saved":"Save"))))})))})))))):r.createElement(r.Fragment,null,r.createElement(o.kC,{py:5},r.createElement(c.bZ,{status:"info"},r.createElement(o.Kq,{direction:"column",spacing:5},r.createElement(o.kC,{direction:"row"},r.createElement(c.zM,null),r.createElement(c.Cd,null,"Empty Class")),r.createElement(c.X,null,"Sorry!!! There are no students registered in this class yet, you can go to the 'Class List' page to register a new student.")))))}},355:(e,t,n)=>{n.d(t,{L:()=>l,u:()=>s});var r=n(67294),a=n(96974),o=n(10575),u=n(42858);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],u=!0,c=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{u||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){var e=c((0,r.useState)(window.innerWidth),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=function(){n(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[t]),t},s=function(){var e=c((0,r.useState)(o.Z.getCurrentUser()),2),t=e[0],n=(e[1],c((0,r.useState)(null),2)),i=n[0],l=n[1],s=c((0,r.useState)(null),2),d=s[0],f=s[1],m=c((0,r.useState)(!1),2),p=m[0],v=m[1],h=(0,a.s0)();return(0,r.useEffect)((function(){var e;v(!0);var n=null==t||null===(e=t.teacher_profile)||void 0===e?void 0:e.grade;null===n&&h("/app/dashboard/profile",{replace:!0}),u.Z.getClassData(n).then((function(e){l((function(t){return e.data})),f((function(t){return e.data.students}))})).catch((function(e){return console.log(e)})).finally((function(){v(!1)}))}),[]),{currentUser:t,grade:i,students:d,setStudents:f,isFetching:p}}},59572:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(67294),a=n(9669),o=n.n(a),u=n(96974),c=n(10575);function i(){var e=c.Z.getAccessToken();return e?{Authorization:"Bearer ".concat(e)}:{}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=o().create({baseURL:"https://classhub.onrender.com/api/v1/",headers:{"Content-Type":"application/json"},withCredentials:!0});f.interceptors.request.use((function(e){return e.headers=s(s({},e.headers),i()),e}),(function(e){return Promise.reject(e)})),f.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;return e.response&&(401!==e.response.status||t._retry||(t._retry=!0,c.Z.refreshToken().then((function(e){return c.Z.setAccessToken(e.data.access),f.defaults.headers.common=s(s({},f.defaults.headers.common),i()),window.location.reload(),f(t)})).catch((function(e){var t;return e.response&&null!==(t=e.response)&&void 0!==t&&t.data?(c.Z.logout(),r.createElement(u.Fg,{to:"/app/login",replace:!0})):Promise.reject(e)})))),Promise.reject(e)}));const m=f},42858:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(59572);function a(e,t,n,r,a,o,u){try{var c=e[o](u),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var u=e.apply(t,n);function c(e){a(u,r,o,c,i,"next",e)}function i(e){a(u,r,o,c,i,"throw",e)}c(void 0)}))}}const u={getClassList:function(){var e=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.Z.get("classes/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getClassData:function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.Z.get("classes/".concat(t,"/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGradeAttendaces:function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.Z.get("classes/attendances/".concat(t,"/"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}}]);